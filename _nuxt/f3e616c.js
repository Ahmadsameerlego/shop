(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{677:function(t,e,n){var content=n(768);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("d4d9427e",content,!0,{sourceMap:!1})},691:function(t,e,n){"use strict";n.r(e);var r=n(22),o=(n(79),{middleware:["auth"],props:{index:null,currentPriceForm:null,SelectedOptions:null},data:function(){var t=this;return{nameRules:[function(e){return!!e||t.$t("reqFiled")}],selectedVal:[],loadingPage:!0,optionsData:null,form:{price:null,count:null,discountPrice:null,options:null,productId:null}}},computed:{productId:function(){return this.$route.params.id}},mounted:function(){console.log("selects ",this.SelectedOptions),console.log("options must be seleted",this.currentPriceForm.options),this.currentPriceForm&&(this.form.count=this.currentPriceForm.count,this.form.price=this.currentPriceForm.price,this.form.discountPrice=this.currentPriceForm.discountPrice)},methods:{deletePrice:function(t,e){var n=this;this.$refs[t].classList.add("d-none"),this.$axios.$delete("deletePrice",{data:{priceId:e}}).then((function(data){n.$swal.fire({title:n.$t("successfullyDeleted"),timer:1e3,icon:"success",allowOutsideClick:!1,showConfirmButton:!1,showCancelButton:!1}),n.dialog=!1,n.loading=!1,n.disabled=!1})).catch((function(t){n.$swal.fire({title:n.$t("deleteFail"),timer:1e3,icon:"error",allowOutsideClick:!1,showConfirmButton:!1,showCancelButton:!1})}))},handleSubmit:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new FormData(e.$refs[t]),e.loading=!0,e.disabled=!0,console.log(t),n.next=6,e.$axios.$post("prices",r).then((function(data){e.loading=!1,e.disabled=!1,e.$swal.fire({timer:1e3,icon:"success",allowOutsideClick:!1,showConfirmButton:!1,showCancelButton:!1})})).catch((function(t){console.log("error",t),e.loading=!1,e.disabled=!1}));case 6:case"end":return n.stop()}}),n)})))()}}}),l=n(26),c=n(43),d=n.n(c),m=n(573),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("form",{ref:t.index,staticClass:"product-form-container",on:{submit:function(e){return e.preventDefault(),t.handleSubmit(t.index)}}},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.index,expression:"index"}],attrs:{type:"text",hidden:"",name:"priceId"},domProps:{value:t.index},on:{input:function(e){e.target.composing||(t.index=e.target.value)}}}),t._v(" "),t._l(t.SelectedOptions,(function(option){return n("div",{key:option.featureId,staticClass:"mt-4"},[n("label",{attrs:{for:""}},[t._v(t._s(option.title))]),t._v(" "),n("select",{staticClass:"priceSelect w-100 mt-3",attrs:{name:"options",id:""}},t._l(option.options,(function(e){return n("option",{key:e.optionId,domProps:{value:e.optionId,selected:!!t.currentPriceForm.options.includes(e.optionId)}},[t._v("\n            "+t._s(e.name)+"\n          ")])})),0)])})),t._v(" "),n("div",{staticClass:"row mt-6"},[n("div",{staticClass:"col-md-6 col-12"},[n("div",{staticClass:"v-input theme--light v-text-field v-text-field--is-booted"},[n("div",{staticClass:"v-input__control"},[n("div",{staticClass:"v-input__slot"},[n("div",{staticClass:"v-text-field__slot"},[n("v-text-field",{attrs:{name:"count",rules:t.nameRules,label:t.$t("count"),type:"number",required:""},model:{value:t.form.count,callback:function(e){t.$set(t.form,"count",e)},expression:"form.count"}})],1)])])])]),t._v(" "),n("div",{staticClass:"col-md-6 col-12"},[n("div",{staticClass:"v-input theme--light v-text-field v-text-field--is-booted"},[n("div",{staticClass:"v-input__control"},[n("div",{staticClass:"v-input__slot"},[n("div",{staticClass:"v-text-field__slot"},[n("v-text-field",{attrs:{name:"price",rules:t.nameRules,label:t.$t("price"),type:"number",required:""},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1)])])])]),t._v(" "),n("div",{staticClass:"col-md-6 col-12"},[n("div",{staticClass:"v-input theme--light v-text-field v-text-field--is-booted"},[n("div",{staticClass:"v-input__control"},[n("div",{staticClass:"v-input__slot"},[n("div",{staticClass:"v-text-field__slot"},[n("v-text-field",{attrs:{name:"discountPrice",rules:t.nameRules,label:t.$t("priceAfterDiscount"),type:"number",required:""},model:{value:t.form.discountPrice,callback:function(e){t.$set(t.form,"discountPrice",e)},expression:"form.discountPrice"}})],1)])])])])])],2),t._v(" "),n("div",{staticClass:"dFlex"},[n("button",{ref:"btn_"+t.index,staticClass:"submit-button v-btn v-btn--is-elevated v-btn--has-bg theme--light v-size--default primary",attrs:{type:"submit"}},[n("span",{staticClass:"v-btn__content"},[t._v(" "+t._s(t.$t("save"))+" ")])]),t._v(" "),n("button",{ref:"delete_"+t.index,staticClass:"submit-button v-btn v-btn--is-elevated v-btn--has-bg tx-white v-size--default red",attrs:{type:"button",color:"red",dark:""},on:{click:function(e){return t.deletePrice(t.index,t.currentPriceForm._id)}}},[n("span",{staticClass:"v-btn__content"},[t._v(" "+t._s(t.$t("delete"))+" ")])])]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.productId,expression:"productId"}],attrs:{type:"text",hidden:"",name:"productId"},domProps:{value:t.productId},on:{input:function(e){e.target.composing||(t.productId=e.target.value)}}})])])}),[],!1,null,null,null);e.default=component.exports;d()(component,{VTextField:m.a})},767:function(t,e,n){"use strict";n(677)},768:function(t,e,n){var r=n(14)(!1);r.push([t.i,".diableButtons{opacity:.1;background:rgba(27,122,177,.67843)}",""]),t.exports=r},817:function(t,e,n){"use strict";n.r(e);var r={middleware:["auth"],components:{priceForm:n(690).default},data:function(){var t=this;return{reqForm:0,disabled:!1,loading:!1,loadingPage:!0,currentPrices:null,SelectedOptions:null,multipleOptions:[],nameRules:[function(e){return!!e||t.$t("reqFiled")}],allfeatures:null,features:{featureId:"",featureName:"",options:""},alloptionsData:[],alloptions:null,options:{optionId:"",featureOptionName:""},form:{productCount:null,priceDiscount:null,price:null},savedIdFature:[],lastSelect:"",cureentPrice:null}},computed:{productId:function(){return this.$route.params.id}},mounted:function(){var t=this;this.$axios.$get("productPrices",{params:{productId:this.productId}}).then((function(e){e.data.prices.length>=0&&(t.currentPrices=e.data.prices,t.SelectedOptions=e.data.features)}))},methods:{addPriceForm:function(){this.reqForm++,this.currentPrices.length>0&&window.scrollTo({top:0,behavior:"smooth"})}}},o=(n(767),n(26)),l=n(43),c=n.n(l),d=n(555),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-box"},[n("p",{staticClass:"font-weight-bold"},[t._v("تعديل الاسعار")]),t._v(" "),n("div",{ref:"formsContainer",staticClass:"forms-container"},[t._l(t.reqForm,(function(t){return n("div",{key:t},[n("price-form",{attrs:{index:t}})],1)})),t._v(" "),t._l(t.currentPrices,(function(e){return n("div",{key:e._id},[n("current-prices-form",{attrs:{currentPriceForm:e,SelectedOptions:t.SelectedOptions,index:e._id}})],1)}))],2),t._v(" "),n("div",{staticClass:"dFlex mt-8"},[n("v-btn",{staticClass:"submit-button",attrs:{color:"primary"},on:{click:t.addPriceForm}},[t._v("\n      اضافه مجموعه\n    ")])],1),t._v(" "),n("v-btn",{staticClass:"Flex submit-button ma-0",attrs:{color:"mt-11"}},[n("nuxt-link",{attrs:{to:t.localePath("/store/products/details/"+t.productId)}},[t._v("\n      انهاء المنتج\n    ")])],1)],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{PriceForm:n(690).default,CurrentPricesForm:n(691).default}),c()(component,{VBtn:d.a})}}]);