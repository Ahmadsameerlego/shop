(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{688:function(e,t,r){"use strict";r.r(t);var o=r(22),n=r(1),l=(r(79),r(70),r(27),r(189),{middleware:["auth"],data:function(){var e,t=this;return{sharedInputs:!0,multipleProudct:!1,avilableSubmit:!1,disabled:!1,loading:!1,currentImages:[],productType:"",multipleWrap:[],multipleOptions:[],nameRules:[function(e){return!!e||t.$t("reqFiled")}],allCategories:null,categories:{departmentId:"",departmentName:""},allsubDeparts:null,subDepart:{subDepartId:"",name:""},allWraps:null,wraps:{warpId:"",wrapName:""},allfeatures:null,features:{featureId:"",featureName:"",options:""},alloptionsData:[],alloptions:null,options:{optionId:"",featureOptionName:""},form:(e={name_ar:""},Object(n.a)(e,"name_ar",""),Object(n.a)(e,"description_ar",""),Object(n.a)(e,"description_en",""),Object(n.a)(e,"departmentId",""),Object(n.a)(e,"price",""),Object(n.a)(e,"discountPrice",""),Object(n.a)(e,"count",""),Object(n.a)(e,"type",""),Object(n.a)(e,"features",""),Object(n.a)(e,"uploads",""),Object(n.a)(e,"wrapIds",[]),Object(n.a)(e,"deleteUploads",[]),Object(n.a)(e,"subDepartId",null),e),savedIdFature:[],lastSelect:"",productNameAr:"",productNameEn:"",productdescriptionEn:"",productdescriptionAr:"",mainSectionVal:null,packagingVal:null,myFiles:[],uploads:null,productImages:[],imgsName:[]}},computed:{productId:function(){return this.$route.params.id}},mounted:function(){var e=this;this.ProductDetails(),setTimeout((function(){return console.log("kkkk",e.categories.departmentName)}),2e3),console.log("kkkk",this.categories.departmentName),this.$axios.$get("categories").then((function(t){e.allCategories=t.data})),this.$axios.$get("wraps").then((function(t){e.allWraps=t.data}))},methods:{ProductDetails:function(){var e=this;this.$axios.$get("storeProductDetails",{params:{productId:this.productId}}).then((function(data){var t=data.data.product;e.currentImages=t.uploads,e.form.name_ar=t.name_ar,e.form.name_en=t.name_en,e.productdescriptionAr=t.description_ar,e.productdescriptionEn=t.description_en,e.categories.departmentId=t.departmentId,e.categories={departmentName:t.departmentName,departmentId:t.departmentId},e.selectedDepartmentID(t.departmentId,t.departmentName),e.subDepart.name=t.subDepartName,e.subDepart.subDepartId=t.subDepartId,e.form.subDepartId=t.subDepartId,e.selectedwrapIds(t.wraps);for(var i=0;i<t.wraps.length;i++)e.multipleWrap.push(t.wraps[i]);e.form.price=t.price,e.form.count=t.count,e.form.discountPrice=t.discountPrice,e.productType=t.type}))},handleSubmit:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0==e.form.wrapIds.length){t.next=8;break}return r=new FormData(e.$refs.form),e.loading=!0,e.disabled=!0,r.append("wrapIds",JSON.stringify(e.form.wrapIds)),r.append("deleteUploads",JSON.stringify(e.form.deleteUploads)),t.next=8,e.$axios.$post("editProduct",r).then((function(data){"simple"==e.productType?e.$router.push(e.localePath("/store/products/details/".concat(e.productId))):(localStorage.setItem("productId",e.productId),e.$router.push("/store/products/productOptions/".concat(e.productId))),e.$refs.form.reset(),e.loading=!1,e.disabled=!1,e.subDepart.name="",e.subDepart.name="",e.$swal.fire({title:data.message,timer:1e3,icon:"success",allowOutsideClick:!1,showConfirmButton:!1,showCancelButton:!1})})).catch((function(t){console.log("error",t),e.loading=!1,e.disabled=!1,e.$swal.fire({title:data.message,timer:1e3,icon:"success",allowOutsideClick:!1,showConfirmButton:!1,showCancelButton:!1})}));case 8:case"end":return t.stop()}}),t)})))()},ProductType:function(){console.log(this.productType),"simple"==this.productType?(this.multipleProudct=!1,this.avilableSubmit=!0):(this.sharedInputs=!1,this.multipleProudct=!0,this.avilableSubmit=!0)},uploadImage:function(e){this.imgsName=[];for(var t=e.target.files,i=0;i<t.length;i++)this.productImages.push(t[i]),this.imgsName.push(t[i].name);this.form.uploads=this.productImages,console.log(this.productImages),console.log(this.form.uploads),this.applyImage(e)},removeImage:function(image,e,t){for(var input=this.$refs.inputFile,r=new DataTransfer,i=0;i<input.files.length;i++)input.files[i].name!=t&&r.items.add(input.files[i]);input.files=r.files,this.productImages.splice(e,1),this.applyImage()},applyImage:function(e){for(var t=this,r=function(i){var e=new FileReader;e.onload=function(r){t.$refs.image[i].src=e.result},e.readAsDataURL(t.productImages[i])},i=0;i<this.productImages.length;i++)r(i)},removeCurrentImage:function(e,t){this.currentImages.splice(t,1),this.form.deleteUploads.push(e)},selectedDepartmentID:function(e){var t=this;this.allsubDeparts=[],this.categories.departmentName,this.form.departmentId=e,this.getSubDepart(e),this.$axios.$get("features",{params:{departmentId:e}}).then((function(e){t.allfeatures=e.data,t.alloptionsData=e.data,console.log(e.data)}))},selectedSubDepartmentID:function(e){this.form.subDepartId=e,console.log(e)},selectedOptions:function(e,t,r){for(var o=[],n=[],i=0;i<e.length;i++)o.push(e[i].optionId),n.push(t);console.log("Options ID",o),console.log("Features ID",n)},selectedwrapIds:function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].warpId);this.form.wrapIds=t},getSubDepart:function(e){var t=this;this.loadingPage=!0,this.$axios.$get("subCategories",{params:{departmentId:e}}).then((function(e){0!==e.data.subDeparts.length?t.allsubDeparts=e.data.subDeparts:t.$swal.fire({title:t.$t("chooseOtherSection_nosubDepartment"),timer:3e3,icon:"error",allowOutsideClick:!1,showConfirmButton:!1,showCancelButton:!1})}))}}}),c=r(26),d=r(43),m=r.n(d),f=r(555),v=r(565),h=r(237),I=r(787),_=r(748),D=r(566),w=r(683),$=r(573),x=r(789),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{ref:"form",staticClass:"product-form-container",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[r("v-row",[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{name:"name_ar",rules:e.nameRules,label:e.$t("productNameAr"),required:""},model:{value:e.form.name_ar,callback:function(t){e.$set(e.form,"name_ar",t)},expression:"form.name_ar"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{name:"name_en",rules:e.nameRules,label:e.$t("productNameEn"),required:""},model:{value:e.form.name_en,callback:function(t){e.$set(e.form,"name_en",t)},expression:"form.name_en"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"6"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.departmentId,expression:"form.departmentId"}],attrs:{type:"text",hidden:"",required:"",name:"departmentId"},domProps:{value:e.form.departmentId},on:{input:function(t){t.target.composing||e.$set(e.form,"departmentId",t.target.value)}}}),e._v(" "),r("v-select",{attrs:{items:e.allCategories,"item-text":"departmentName",rules:[function(e){return!!e||"Item is required"}],label:e.$t("mainSectionName"),required:"","return-object":""},on:{change:function(t){return e.selectedDepartmentID(e.categories.departmentId)}},model:{value:e.categories,callback:function(t){e.categories=t},expression:"categories"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"6"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.subDepartId,expression:"form.subDepartId"}],attrs:{type:"text",hidden:"",name:"subDepartId"},domProps:{value:e.form.subDepartId},on:{input:function(t){t.target.composing||e.$set(e.form,"subDepartId",t.target.value)}}}),e._v(" "),r("v-select",{attrs:{items:e.allsubDeparts,"item-text":"name",rules:[function(e){return!!e||"Item is required"}],label:e.$t("subSectionName"),required:"","return-object":""},on:{change:function(t){return e.selectedSubDepartmentID(e.subDepart.subDepartId)}},model:{value:e.subDepart,callback:function(t){e.subDepart=t},expression:"subDepart"}})],1),e._v(" "),r("v-col",{staticClass:"mt-4",attrs:{cols:"12",md:"6"}},[r("v-select",{attrs:{items:e.allWraps,"item-text":"wrapName",rules:[function(e){return!!e||"Item is required"}],label:e.$t("packaging"),required:"",multiple:"",chips:"","return-object":"","persistent-hint":"","small-chips":"","auto-select-first":""},on:{change:function(t){return e.selectedwrapIds(e.multipleWrap)}},model:{value:e.multipleWrap,callback:function(t){e.multipleWrap=t},expression:"multipleWrap"}})],1),e._v(" "),r("v-col",{staticClass:"mt-7",attrs:{cols:"12",md:"6"}},[r("label",{staticClass:"mb-3",attrs:{for:""}},[e._v(e._s(this.$t("product_images")))]),e._v(" "),r("div",{staticClass:"uploadFileImages"},[r("input",{ref:"inputFile",attrs:{id:"file-upload",type:"file",name:"uploads",multiple:""},on:{change:e.uploadImage}}),e._v(" "),r("div",{staticClass:"pa-2",staticStyle:{"text-align":"end"}},[r("v-icon",{staticClass:"mt-1"},[e._v("mdi-file-upload-outline")])],1)]),e._v(" "),e.currentImages.length>0?r("div",{staticClass:"current-images"},[r("label",{staticClass:"mt-4 d-block",attrs:{for:""}},[e._v("\n          "+e._s(this.$t("current_product_images"))+"\n        ")]),e._v(" "),r("div",{staticClass:"preview-product-images mt-2"},e._l(e.currentImages,(function(image,t){return r("div",{key:t},[r("div",{staticClass:"image-holder"},[r("img",{attrs:{alt:"",src:image}}),e._v(" "),r("button",{attrs:{type:"button"},on:{click:function(r){return r.preventDefault(),e.removeCurrentImage(image,t)}}},[e._v("\n                x\n              ")])])])})),0)]):e._e(),e._v(" "),e.productImages.length>0?r("div",{staticClass:"added-images mt-3"},[r("label",{staticClass:"mt-4 d-block",attrs:{for:""}},[e._v("\n          "+e._s(this.$t("new_product_images"))+"\n        ")]),e._v(" "),r("div",{staticClass:"preview-product-images mt-2"},e._l(e.productImages,(function(image,t){return r("div",{key:t},[r("div",{staticClass:"image-holder"},[r("img",{ref:"image",refInFor:!0,attrs:{alt:"",src:""}}),e._v(" "),r("button",{attrs:{type:"button"},on:{click:function(r){return e.removeImage(image,t,image.name)}}},[e._v("\n                x\n              ")])])])})),0)]):e._e()]),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-textarea",{attrs:{required:"",rules:[function(e){return!!e||"Item is required"}],name:"description_ar",label:e.$t("productdescriptionAr")},model:{value:e.productdescriptionAr,callback:function(t){e.productdescriptionAr=t},expression:"productdescriptionAr"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-textarea",{attrs:{required:"",rules:[function(e){return!!e||"Item is required"}],name:"description_en",label:e.$t("productdescriptionEn")},model:{value:e.productdescriptionEn,callback:function(t){e.productdescriptionEn=t},expression:"productdescriptionEn"}})],1),e._v(" "),r("v-col",{staticClass:"mt-md-n10 pa-md-6",attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{name:"price",rules:e.nameRules,label:e.$t("price"),type:"number",required:""},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),r("v-col",{staticClass:"mt-md-n10 pa-md-6",attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{name:"discountPrice",rules:e.nameRules,label:e.$t("priceAfterDiscount"),type:"number"},model:{value:e.form.discountPrice,callback:function(t){e.$set(e.form,"discountPrice",t)},expression:"form.discountPrice"}})],1),e._v(" "),r("v-col",{staticClass:"mt-md-n10 pa-md-6",attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{name:"count",rules:e.nameRules,label:e.$t("count"),type:"number"},model:{value:e.form.count,callback:function(t){e.$set(e.form,"count",t)},expression:"form.count"}})],1),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.productType,expression:"productType"}],attrs:{type:"text",hidden:"",name:"type"},domProps:{value:e.productType},on:{input:function(t){t.target.composing||(e.productType=t.target.value)}}}),e._v(" "),r("v-col",{attrs:{cols:"12",md:"6"}},[r("label",{attrs:{for:""}},[e._v(e._s(e.$t("productdType")))]),e._v(" "),r("v-radio-group",{staticClass:"d-flex mt-n1",attrs:{rules:[function(e){return!!e||"Item is required"}]},on:{change:function(t){return e.ProductType()}},model:{value:e.productType,callback:function(t){e.productType=t},expression:"productType"}},[r("v-radio",{staticClass:"w-50 siz-12 mt-3",attrs:{label:e.$t("simple"),color:"primary",value:"simple"}}),e._v(" "),r("v-radio",{staticClass:"w-50 siz-12 mt-3",attrs:{label:e.$t("multiple"),color:"primary",value:"multiple"}})],1)],1)],1),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.productId,expression:"productId"}],attrs:{type:"text",hidden:"",name:"productId"},domProps:{value:e.productId},on:{input:function(t){t.target.composing||(e.productId=t.target.value)}}}),e._v(" "),r("div",{staticClass:"dFlex"},[r("v-btn",{staticClass:"submit-button",attrs:{disabled:e.disabled,loading:e.loading,color:"primary",type:"submit"}},[e._v("\n      "+e._s(e.$t("edit"))+"\n    ")])],1)],1)}),[],!1,null,null,null);t.default=component.exports;m()(component,{VBtn:f.a,VCol:v.a,VIcon:h.a,VRadio:I.a,VRadioGroup:_.a,VRow:D.a,VSelect:w.a,VTextField:$.a,VTextarea:x.a})}}]);